apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - deployment.yaml
  - istio-gateway.yaml
  - istio-virtualservice.yaml
  - service.yaml
  - serviceaccount.yaml
  - auth.yaml
  - certificate-hugecat.yaml

generatorOptions:
  disableNameSuffixHash: true

configMapGenerator:
  - name: portfolio-config
    behavior: create
    literals:
      - NODE_ENV=production
      - NEXTAUTH_URL=https://www.cat-herding.net
      - AZURE_DEPLOYMENT=true

secretGenerator:
  - name: portfolio-secrets
    behavior: create
    literals:
      - NEXTAUTH_SECRET=change-me-in-production
      - ADMIN_EMAIL=admin@cat-herding.net
      - ADMIN_PASSWORD=change-me-in-production
      - ADMIN_NAME=Portfolio Admin
  - name: portfolio-db-secret
    behavior: create
    literals:
      - DATABASE_URL=postgresql://portfolio:change-me@localhost:5432/portfolio
